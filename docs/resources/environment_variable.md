---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "spacelift_environment_variable Resource - terraform-provider-spacelift"
subcategory: ""
description: |-
  spacelift_environment_variable defines an environment variable on the context (spacelift_context), stack (spacelift_stack) or a module (spacelift_module), thereby allowing to pass and share various secrets and configuration with Spacelift stacks.
  For secret variables (write_only), prefer using value_wo and value_wo_version instead of value. value_wo is a write-only attribute that never gets stored in state. Note that the checksum will still be present in state for drift detection.
---

# spacelift_environment_variable (Resource)

`spacelift_environment_variable` defines an environment variable on the context (`spacelift_context`), stack (`spacelift_stack`) or a module (`spacelift_module`), thereby allowing to pass and share various secrets and configuration with Spacelift stacks.

For secret variables (`write_only`), prefer using `value_wo` and `value_wo_version` instead of `value`. `value_wo` is a write-only attribute that never gets stored in state. Note that the checksum will still be present in state for drift detection.

## Example Usage

```terraform
# For a context
resource "spacelift_environment_variable" "ireland-kubeconfig" {
  context_id  = "prod-k8s-ie"
  name        = "KUBECONFIG"
  value       = "/project/spacelift/kubeconfig"
  write_only  = false
  description = "Kubeconfig for Ireland Kubernetes cluster"
}

# For a module
resource "spacelift_environment_variable" "module-kubeconfig" {
  module_id   = "k8s-module"
  name        = "KUBECONFIG"
  value       = "/project/spacelift/kubeconfig"
  write_only  = false
  description = "Kubeconfig for the module"
}

# For a stack
resource "spacelift_environment_variable" "core-kubeconfig" {
  stack_id    = "k8s-core"
  name        = "KUBECONFIG"
  value       = "/project/spacelift/kubeconfig"
  write_only  = false
  description = "Kubeconfig for the core stack"
}

# For a secret variable using write-only attributes (recommended for secrets)
# The value is never stored in Terraform state. Requires Terraform 1.11+ or OpenTofu 1.11+.
resource "spacelift_environment_variable" "api-token" {
  context_id       = "prod-k8s-ie"
  name             = "API_TOKEN"
  value_wo         = var.api_token
  value_wo_version = 1 # Increment to update the value
  write_only       = true
  description      = "API token for external service"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the environment variable

### Optional

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `context_id` (String) ID of the context on which the environment variable is defined
- `description` (String) Description of the environment variable
- `module_id` (String) ID of the module on which the environment variable is defined
- `stack_id` (String) ID of the stack on which the environment variable is defined
- `value` (String, Sensitive) Value of the environment variable. Defaults to an empty string.
- `value_wo` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) Value of the environment variable. The value is not stored in the state. Modify value_wo_version to trigger an update. This field requires Terraform/OpenTofu 1.11+.
- `value_wo_version` (String) Used together with value_wo to trigger an update to the value of the environment variable. Increment this value when an update to value_wo is required. This field requires Terraform/OpenTofu 1.11+.
- `write_only` (Boolean) Indicates whether the value is secret or not. Defaults to `true`.

### Read-Only

- `checksum` (String) SHA-256 checksum of the value
- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import spacelift_environment_variable.ireland-kubeconfig context/$CONTEXT_ID/$ENVIRONMENT_VARIABLE_NAME

terraform import spacelift_environment_variable.module-kubeconfig module/$MODULE_ID/$ENVIRONMENT_VARIABLE_NAME

terraform import spacelift_environment_variable.core-kubeconfig stack/$STACK_ID/$ENVIRONMENT_VARIABLE_NAME
```
