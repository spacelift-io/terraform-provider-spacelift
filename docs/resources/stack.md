---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "spacelift_stack Resource - terraform-provider-spacelift"
subcategory: ""
description: |-
  spacelift_stack combines source code and configuration to create a runtime environment where resources are managed. In this way it's similar to a stack in AWS CloudFormation, or a project on generic CI/CD platforms.
---

# spacelift_stack (Resource)

`spacelift_stack` combines source code and configuration to create a runtime environment where resources are managed. In this way it's similar to a stack in AWS CloudFormation, or a project on generic CI/CD platforms.

## Example Usage

```terraform
# Terraform stack using github.com as VCS
resource "spacelift_stack" "k8s-core" {
  administrative    = true
  autodeploy        = true
  branch            = "master"
  description       = "Shared cluster services (Datadog, Istio etc.)"
  name              = "Kubernetes core services"
  project_root      = "/project"
  repository        = "core-infra"
  terraform_version = "0.12.6"
}

# Terraform stack using Bitbucket Cloud as VCS
resource "spacelift_stack" "k8s-core-bitbucket-cloud" {
  bitbucket_cloud {
    namespace = "SPACELIFT" # The Bitbucket project containing the repository
  }

  administrative    = true
  autodeploy        = true
  branch            = "master"
  description       = "Shared cluster services (Datadog, Istio etc.)"
  name              = "Kubernetes core services"
  project_root      = "/project"
  repository        = "core-infra"
  terraform_version = "0.12.6"
}

# Terraform stack using Bitbucket Data Center as VCS
resource "spacelift_stack" "k8s-core-bitbucket-datacenter" {
  bitbucket_datacenter {
    namespace = "SPACELIFT" # The Bitbucket project containing the repository
  }

  administrative    = true
  autodeploy        = true
  branch            = "master"
  description       = "Shared cluster services (Datadog, Istio etc.)"
  name              = "Kubernetes core services"
  project_root      = "/project"
  repository        = "core-infra"
  terraform_version = "0.12.6"
}

# Terraform stack using GitHub Enterprise as VCS
resource "spacelift_stack" "k8s-core-github-enterprise" {
  github_enterprise {
    namespace = "spacelift" # The GitHub organization / user the repository belongs to
  }

  administrative    = true
  autodeploy        = true
  branch            = "master"
  description       = "Shared cluster services (Datadog, Istio etc.)"
  name              = "Kubernetes core services"
  project_root      = "/project"
  repository        = "core-infra"
  terraform_version = "0.12.6"
}

# Terraform stack using GitLab as VCS
resource "spacelift_stack" "k8s-core-gitlab" {
  gitlab {
    namespace = "spacelift" # The GitLab namespace containing the repository
  }

  administrative    = true
  autodeploy        = true
  branch            = "master"
  description       = "Shared cluster services (Datadog, Istio etc.)"
  name              = "Kubernetes core services"
  project_root      = "/project"
  repository        = "core-infra"
  terraform_version = "0.12.6"
}

# Pulumi stack using github.com as VCS
resource "spacelift_stack" "k8s-core-pulumi" {
  pulumi {
    login_url  = "s3://pulumi-state-bucket"
    stack_name = "kubernetes-core-services"
  }

  autodeploy   = true
  branch       = "master"
  description  = "Shared cluster services (Datadog, Istio etc.)"
  name         = "Kubernetes core services"
  project_root = "/project"
  repository   = "core-infra"
  runner_image = "public.ecr.aws/t0p9w2l5/runner-pulumi-javascript:latest"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **branch** (String) GitHub branch to apply changes to
- **name** (String) Name of the stack - should be unique in one account
- **repository** (String) Name of the repository, without the owner part

### Optional

- **administrative** (Boolean) Indicates whether this stack can manage others
- **after_apply** (List of String) List of after-apply scripts
- **after_destroy** (List of String) List of after-destroy scripts
- **after_init** (List of String) List of after-init scripts
- **after_perform** (List of String) List of after-perform scripts
- **after_plan** (List of String) List of after-plan scripts
- **autodeploy** (Boolean) Indicates whether changes to this stack can be automatically deployed
- **autoretry** (Boolean) Indicates whether obsolete proposed changes should automatically be retried
- **before_apply** (List of String) List of before-apply scripts
- **before_destroy** (List of String) List of before-destroy scripts
- **before_init** (List of String) List of before-init scripts
- **before_perform** (List of String) List of before-perform scripts
- **before_plan** (List of String) List of before-plan scripts
- **bitbucket_cloud** (Block List, Max: 1) (see [below for nested schema](#nestedblock--bitbucket_cloud))
- **bitbucket_datacenter** (Block List, Max: 1) (see [below for nested schema](#nestedblock--bitbucket_datacenter))
- **cloudformation** (Block List, Max: 1) CloudFormation-specific configuration. Presence means this Stack is a CloudFormation Stack. (see [below for nested schema](#nestedblock--cloudformation))
- **description** (String) Free-form stack description for users
- **enable_local_preview** (Boolean) Indicates whether local preview runs can be triggered on this Stack
- **github_action_deploy** (Boolean) Indicates whether GitHub users can deploy from the Checks API
- **github_enterprise** (Block List, Max: 1) (see [below for nested schema](#nestedblock--github_enterprise))
- **gitlab** (Block List, Max: 1) (see [below for nested schema](#nestedblock--gitlab))
- **id** (String) The ID of this resource.
- **import_state** (String) State file to upload when creating a new stack
- **labels** (Set of String)
- **manage_state** (Boolean) Determines if Spacelift should manage state for this stack
- **project_root** (String) Project root is the optional directory relative to the workspace root containing the entrypoint to the Stack.
- **protect_from_deletion** (Boolean) Protect this stack from accidental deletion. If set, attempts to delete this stack will fail.
- **pulumi** (Block List, Max: 1) Pulumi-specific configuration. Presence means this Stack is a Pulumi Stack. (see [below for nested schema](#nestedblock--pulumi))
- **runner_image** (String) Name of the Docker image used to process Runs
- **showcase** (Block List, Max: 1) (see [below for nested schema](#nestedblock--showcase))
- **terraform_version** (String) Terraform version to use
- **terraform_workspace** (String) Terraform workspace to select
- **worker_pool_id** (String) ID of the worker pool to use

### Read-Only

- **aws_assume_role_policy_statement** (String) AWS IAM assume role policy statement setting up trust relationship

<a id="nestedblock--bitbucket_cloud"></a>
### Nested Schema for `bitbucket_cloud`

Required:

- **namespace** (String) The Bitbucket project containing the repository


<a id="nestedblock--bitbucket_datacenter"></a>
### Nested Schema for `bitbucket_datacenter`

Required:

- **namespace** (String) The Bitbucket project containing the repository


<a id="nestedblock--cloudformation"></a>
### Nested Schema for `cloudformation`

Required:

- **entry_template_file** (String) Template file `cloudformation package` will be called on
- **region** (String) AWS region to use
- **stack_name** (String) CloudFormation stack name
- **template_bucket** (String) S3 bucket to save CloudFormation templates to


<a id="nestedblock--github_enterprise"></a>
### Nested Schema for `github_enterprise`

Required:

- **namespace** (String) The GitHub organization / user the repository belongs to


<a id="nestedblock--gitlab"></a>
### Nested Schema for `gitlab`

Required:

- **namespace** (String) The GitLab namespace containing the repository


<a id="nestedblock--pulumi"></a>
### Nested Schema for `pulumi`

Required:

- **login_url** (String) State backend to log into on Run initialize.
- **stack_name** (String) Pulumi stack name to use with the state backend.


<a id="nestedblock--showcase"></a>
### Nested Schema for `showcase`

Required:

- **namespace** (String)


